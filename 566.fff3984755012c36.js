"use strict";(self.webpackChunknewport_erp=self.webpackChunknewport_erp||[]).push([[566],{1566:(W,u,i)=>{i.r(u),i.d(u,{BajaReporteInformeModule:()=>X});var h=i(5412),f=i(6895),r=i(7155),_=i(7392),I=i(4006),j=i(529),d=i(4891),x=i(7391),p=i(1588),c=i(7800),e=i(4650),C=i(6805),B=i(9850),T=i(980);function v(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li",28),e.NdJ("click",function(){const m=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.mostrarTipoElemento(m))}),e._uU(1),e.qZA()}if(2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.descripcion," ")}}function Z(o,n){1&o&&(e.TgZ(0,"th",29),e._uU(1,"#"),e.qZA())}function R(o,n){if(1&o&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&o){const t=e.oxw().index;e.xp6(1),e.Oqu(t+1)}}function A(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",33),e.NdJ("change",function(l){e.CHM(t);const m=e.oxw().$implicit,s=e.oxw();return e.KtG(s.onCheckedInformeBaja(m,l))}),e.qZA()}}function E(o,n){if(1&o&&(e.TgZ(0,"td",30),e.YNc(1,R,2,1,"label",31),e.YNc(2,A,1,0,"input",32),e.qZA()),2&o){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",1!=a.tipoElementoId),e.xp6(1),e.Q6J("ngIf",1===a.tipoElementoId&&"APROBADO-2"===t.estado)}}function w(o,n){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Codificaci\xf3n"),e.qZA())}function O(o,n){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu((null==t.sitio||null==t.sitio.empresa?null:t.sitio.empresa.nombre_corto)+"-"+(null==t.departamento||null==t.departamento.area?null:t.departamento.area.nombre_corto)+"-"+(null==t.sitio?null:t.sitio.nombre_corto)+"-"+t.fecha_creacion+"-"+t.id||"-")}}function N(o,n){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Fecha"),e.qZA())}function U(o,n){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t.fecha_creacion)}}function Y(o,n){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Procedencia"),e.qZA())}function y(o,n){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t.sitio.nombre)}}function D(o,n){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Empresa"),e.qZA())}function P(o,n){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t.sitio.empresa.nombre)}}function M(o,n){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Estado Baja"),e.qZA())}function k(o,n){1&o&&e._UZ(0,"mat-icon",41)}function J(o,n){1&o&&e._UZ(0,"mat-icon",42)}function Q(o,n){1&o&&e._UZ(0,"mat-icon",43)}function S(o,n){1&o&&e._UZ(0,"mat-icon",44)}function F(o,n){1&o&&e._UZ(0,"mat-icon",45)}function G(o,n){1&o&&e._UZ(0,"mat-icon",46)}function q(o,n){1&o&&e._UZ(0,"mat-icon",47)}function H(o,n){if(1&o&&(e.TgZ(0,"td",30),e.YNc(1,k,1,0,"mat-icon",34),e.YNc(2,J,1,0,"mat-icon",35),e.YNc(3,Q,1,0,"mat-icon",36),e.YNc(4,S,1,0,"mat-icon",37),e.YNc(5,F,1,0,"mat-icon",38),e.YNc(6,G,1,0,"mat-icon",39),e.YNc(7,q,1,0,"mat-icon",40),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf","ENVIADO-GG"===t.estado),e.xp6(1),e.Q6J("ngIf","APROBADO-1"===t.estado),e.xp6(1),e.Q6J("ngIf","APROBADO-2"===t.estado),e.xp6(1),e.Q6J("ngIf","APROBADO-GG"===t.estado),e.xp6(1),e.Q6J("ngIf","VALIDADO"===t.estado),e.xp6(1),e.Q6J("ngIf","PENDIENTE"===t.estado),e.xp6(1),e.Q6J("ngIf","RECHAZADO"===t.estado)}}function z(o,n){1&o&&e._UZ(0,"tr",48)}function $(o,n){1&o&&e._UZ(0,"tr",49)}let g=(()=>{class o{constructor(t,a,l,m){this.bajaGetService=t,this.bajaPostService=a,this.modal=l,this.tipoElementoGetService=m,this.puedeEnviarGerencia=!(!(0,p.Gs)(c.K1,c.yG,c.ul)&&!(0,p.Gs)(c.K1,c.yG,c.sy)),this.puedeVer=!!(0,p.Gs)(c.K1,c.Vf),this.tablaCabecera=["id","codificacion","fecha","procedencia","empresa","estado"],this.listaInformeBajaId=[],this.tipoElementoSeleccionado="Venta",this.listaTipoElemento=[],this.tipoElementoId=1,this.sesion=(0,p.l3)()}ngOnInit(){this.obtenerInformeBajaPorUsuario(1),this.cargarTiposElemento()}cargarTiposElemento(){this.tipoElementoGetService.obtenerTiposElemento().then(t=>{this.listaTipoElemento=t.data.lista_tipo_elemento||[]})}obtenerInformeBajaPorUsuario(t){this.bajaGetService.obtenerInformeBajaPorTipoElemento(t).then(a=>{this.dataSource=new r.by(a.data.lista_informe_baja)})}onCheckedInformeBaja(t,a){a.target.checked?this.listaInformeBajaId.push(t.id):this.listaInformeBajaId.forEach((m,s)=>{m===t.id&&this.listaInformeBajaId.splice(s,1)})}enviar(){this.listaInformeBajaId.length>0?this.modal.open(d._,{data:{titulo:c.in,accion:c.x9+" que desea enivar a gerencia ?",opciones:2},disableClose:!0}).afterClosed().subscribe(t=>{t&&this.bajaPostService.notificarReporteGerenciaInformeBaja({lista_informe_baja_id:this.listaInformeBajaId,usuario_id_edicion:this.sesion.usuario.id}).then(l=>{"0"===l.codigo?this.modal.open(d._,{data:{titulo:c.A9,accion:c.H1,opciones:1},disableClose:!0}).afterClosed().subscribe(m=>{this.obtenerInformeBajaPorUsuario(1)}):this.modal.open(d._,{data:{titulo:c.MF,accion:l.mensaje,opciones:1},disableClose:!0})})}):this.modal.open(d._,{data:{titulo:c.MF,accion:c.A3+"informe",opciones:1},disableClose:!0})}mostrarTipoElemento(t){this.tipoElementoSeleccionado=t.descripcion,this.tipoElementoId=t.id,this.obtenerInformeBajaPorUsuario(this.tipoElementoId)}abrirDialogFiltrar(){this.modal.open(x._,{data:{fechaInicial:this.fechaInicial,fechaFinal:this.fechaFinal}}).afterClosed().subscribe(a=>{if(console.info(a),a){let l={fecha_inicial:a.fechaInicial,fecha_final:a.fechaFinal,estados:a.estados,usuario_id:this.sesion.usuario.id,tipo_elemento:this.tipoElementoId};console.info("---------------"),console.info(l),console.info("---------------"),this.bajaPostService.obtenerInformeBajaPorTipoElementoYFiltros(l).then(m=>{this.dataSource=new r.by(m.data.lista_informe_baja)})}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.p),e.Y36(B.m),e.Y36(h.uw),e.Y36(T.f))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ne-adm-gact-baja-reporte-informe"]],decls:42,vars:8,consts:[[1,"contenedor-acciones"],[1,"contenedor-acciones-izquierdo"],[1,"form-group","col-md-2.5"],["for","tipoElemento",1,"label-common"],[1,"form-group","col-md-6"],[1,"multiselect"],["tabindex","0","aria-placeholder","Select a control type","aria-expanded","false","aria-multiselectable","false","role","combobox",1,"multiselect-wrapper","colorFondo"],[1,"multiselect-single-label"],[1,"multiselect-single-label-text"],["aria-hidden","false","fontIcon","arrow_drop_down",1,"mostrar"],["tabindex","-1",1,"multiselect-dropdown"],["id","multiselect-options","role","listbox",1,"multiselect-options"],["class","multiselect-option",3,"value","click",4,"ngFor","ngForOf"],[1,"contenedor-acciones-derecho"],[1,"btn-principal",3,"disabled","click"],[1,"btn-principal",3,"click"],[1,"contenedor-lista"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"tabla",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","tabla-titulo",4,"matHeaderCellDef"],["mat-cell","","class","tabla-valor",4,"matCellDef"],["matColumnDef","codificacion"],["matColumnDef","fecha"],["matColumnDef","procedencia"],["matColumnDef","empresa"],["matColumnDef","estado"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"multiselect-option",3,"value","click"],["mat-header-cell","",1,"tabla-titulo"],["mat-cell","",1,"tabla-valor"],[4,"ngIf"],["type","checkbox","name","checkbox",3,"change",4,"ngIf"],["type","checkbox","name","checkbox",3,"change"],["aria-hidden","false","fontIcon","mark_email_read","class","icono-enviado",4,"ngIf"],["aria-hidden","false","fontIcon","check","class","icono-aprobado",4,"ngIf"],["aria-hidden","false","fontIcon","done_all","class","icono-aprobado",4,"ngIf"],["aria-hidden","false","fontIcon","check_circle","class","icono-aprobado",4,"ngIf"],["aria-hidden","false","fontIcon","check_circle","class","icono-validado",4,"ngIf"],["aria-hidden","false","fontIcon","circle","class","icono-pendiente",4,"ngIf"],["aria-hidden","false","fontIcon","cancel","class","icono-rechazado",4,"ngIf"],["aria-hidden","false","fontIcon","mark_email_read",1,"icono-enviado"],["aria-hidden","false","fontIcon","check",1,"icono-aprobado"],["aria-hidden","false","fontIcon","done_all",1,"icono-aprobado"],["aria-hidden","false","fontIcon","check_circle",1,"icono-aprobado"],["aria-hidden","false","fontIcon","check_circle",1,"icono-validado"],["aria-hidden","false","fontIcon","circle",1,"icono-pendiente"],["aria-hidden","false","fontIcon","cancel",1,"icono-rechazado"],["mat-header-row",""],["mat-row",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4,"Destino"),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"span",8),e._uU(10),e.qZA()(),e._UZ(11,"mat-icon",9),e.qZA(),e.TgZ(12,"div",10)(13,"ul",11),e.YNc(14,v,2,2,"li",12),e.qZA()()()()(),e.TgZ(15,"div",13)(16,"button",14),e.NdJ("click",function(){return a.enviar()}),e._uU(17," Enviar a Gerencia "),e.qZA(),e.TgZ(18,"button",15),e.NdJ("click",function(){return a.abrirDialogFiltrar()}),e._uU(19," Filtrar "),e.qZA()()(),e.TgZ(20,"div",16)(21,"table",17),e.ynx(22,18),e.YNc(23,Z,2,0,"th",19),e.YNc(24,E,3,2,"td",20),e.BQk(),e.ynx(25,21),e.YNc(26,w,2,0,"th",19),e.YNc(27,O,2,1,"td",20),e.BQk(),e.ynx(28,22),e.YNc(29,N,2,0,"th",19),e.YNc(30,U,2,1,"td",20),e.BQk(),e.ynx(31,23),e.YNc(32,Y,2,0,"th",19),e.YNc(33,y,2,1,"td",20),e.BQk(),e.ynx(34,24),e.YNc(35,D,2,0,"th",19),e.YNc(36,P,2,1,"td",20),e.BQk(),e.ynx(37,25),e.YNc(38,M,2,0,"th",19),e.YNc(39,H,8,7,"td",20),e.BQk(),e.YNc(40,z,1,0,"tr",26),e.YNc(41,$,1,0,"tr",27),e.qZA()()),2&t&&(e.xp6(10),e.Oqu(a.tipoElementoSeleccionado),e.xp6(4),e.Q6J("ngForOf",a.listaTipoElemento),e.xp6(2),e.ekj("btn-principal-off",1!=a.tipoElementoId||!a.puedeEnviarGerencia),e.Q6J("disabled",1!=a.tipoElementoId||!a.puedeEnviarGerencia),e.xp6(5),e.Q6J("dataSource",a.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",a.tablaCabecera),e.xp6(1),e.Q6J("matRowDefColumns",a.tablaCabecera))},dependencies:[f.sg,f.O5,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,_.Hw],styles:[".contenedor-acciones[_ngcontent-%COMP%]{width:calc(100% - 20px);height:8%;background-color:#313135;align-items:center;border-radius:6px;margin-right:10px;margin-left:10px;box-shadow:#0003 0 2px 8px}.contenedor-acciones-izquierdo[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:flex-start;align-items:center;float:left;width:50%;height:100%;padding-left:1%;padding-top:20px;text-align:center}.contenedor-acciones-izquierdo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:1%;width:25%}.contenedor-acciones-derecho[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:flex-end;align-items:center;float:right;width:50%;height:100%;padding-right:1%}.contenedor-acciones-derecho[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:1%;width:25%}.contenedor-lista[_ngcontent-%COMP%]{width:calc(100% - 20px);margin-top:1%;height:calc(85% - 60px);border-radius:6px;background-color:#313135;overflow-y:auto;-ms-overflow-style:none;scrollbar-width:none;margin-right:10px;margin-left:10px;box-shadow:#0003 0 2px 8px}.contenedor-lista[_ngcontent-%COMP%]   .tabla[_ngcontent-%COMP%]{width:95%!important;margin-top:2%}.contenedor-lista[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),o})();var b=i(8996);const K=[{path:"",component:g}];let V=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[b.Bz.forChild(K),b.Bz]}),o})();var L=i(164);let X=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o,bootstrap:[g]}),o.\u0275inj=e.cJS({imports:[j.JF,f.ez,I.u5,V,I.UX,r.p0,_.Ps,h.Is,L.k]}),o})()}}]);