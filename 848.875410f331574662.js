"use strict";(self.webpackChunknewport_erp=self.webpackChunknewport_erp||[]).push([[848],{1848:(I,v,c)=>{c.r(v),c.d(v,{VentaBajaReporteUsuarioAdjuntaEntregaModule:()=>Te});var p=c(5412),g=c(6895),d=c(7155),h=c(7392),m=c(4006),f=c(529),x=c(5766),_=c(1588),l=c(7800),u=c(4891),A=c(7579),e=c(4650);let w=(()=>{class o{constructor(t,n,i){this.dialogRef=t,this.formBuilder=n,this.modal=i,this.motivo=""}ngOnInit(){this.respuestaAlertaModal=new A.x,this.construirFormularioCreacion()}aceptarAccion(){this.motivo=this.formulario.get("motivo")?.value,0===this.motivo.trim().length?this.modal.open(u._,{data:{titulo:l.in,accion:l.W6+"observacion",opciones:2},disableClose:!0}).afterClosed().subscribe(t=>{}):this.dialogRef.close(this.motivo)}cancelarAccion(){this.dialogRef.close("")}construirFormularioCreacion(){this.formulario=this.formBuilder.group({motivo:new m.NI({value:"",disabled:!1},m.kI.required)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.so),e.Y36(m.qu),e.Y36(p.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-venta-elemento-observacion-supervision"]],decls:16,vars:1,consts:[[1,"contenedor-principal"],[1,"contenedor-medio"],[1,"formulario",3,"formGroup"],[1,"form-row"],[1,"form-group","col-md-12"],["for","user",1,"label-common"],[1,"fondoInput"],["formControlName","motivo",1,"form-control","colorFondo"],[1,"contenedor-acciones"],[1,"btn-principal",3,"click"],["cdkFocusInitial","",1,"btn-principal","btn-cancelar",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2,"Ingresar Informacion"),e.qZA(),e.TgZ(3,"div",1)(4,"form",2)(5,"div",3)(6,"div",4)(7,"label",5),e._uU(8,"Observaci\xf3n de entrega:"),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"textarea",7),e.qZA()()()()(),e.TgZ(11,"div",8)(12,"button",9),e.NdJ("click",function(){return n.aceptarAccion()}),e._uU(13," Aceptar "),e.qZA(),e.TgZ(14,"button",10),e.NdJ("click",function(){return n.cancelarAccion()}),e._uU(15," Cancelar "),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",n.formulario))},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u],styles:['@font-face{font-family:Material Icons;font-style:normal;font-weight:400;font-display:block;src:url(material-icons.59322316b3fd6063.woff2) format("woff2"),url(material-icons.4ad034d2c499d9b6.woff) format("woff")}.material-icons[_ngcontent-%COMP%]{font-family:Material Icons;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:"liga"}@font-face{font-family:Material Icons Outlined;font-style:normal;font-weight:400;font-display:block;src:url(material-icons-outlined.f86cb7b0aa53f0fe.woff2) format("woff2"),url(material-icons-outlined.78a93b2079680a08.woff) format("woff")}.material-icons-outlined[_ngcontent-%COMP%]{font-family:Material Icons Outlined;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:"liga"}@font-face{font-family:Material Icons Round;font-style:normal;font-weight:400;font-display:block;src:url(material-icons-round.b10ec9db5b7fbc74.woff2) format("woff2"),url(material-icons-round.92dc7ca2f4c591e7.woff) format("woff")}.material-icons-round[_ngcontent-%COMP%]{font-family:Material Icons Round;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:"liga"}@font-face{font-family:Material Icons Sharp;font-style:normal;font-weight:400;font-display:block;src:url(material-icons-sharp.3885863ee4746422.woff2) format("woff2"),url(material-icons-sharp.a71cb2bf66c604de.woff) format("woff")}.material-icons-sharp[_ngcontent-%COMP%]{font-family:Material Icons Sharp;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:"liga"}@font-face{font-family:Material Icons Two Tone;font-style:normal;font-weight:400;font-display:block;src:url(material-icons-two-tone.675bd578bd14533e.woff2) format("woff2"),url(material-icons-two-tone.588d63134de807a7.woff) format("woff")}.material-icons-two-tone[_ngcontent-%COMP%]{font-family:Material Icons Two Tone;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-feature-settings:"liga"}.contenedor-principal[_ngcontent-%COMP%]{width:30vw;background-color:#313135;border-radius:6px;overflow:auto}.contenedor-principal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#8a8894;font-size:1rem;font-weight:600;font-family:Montserrat,sans-serif;margin-bottom:0;padding:10px}.contenedor-principal[_ngcontent-%COMP%]   .contenedor-medio[_ngcontent-%COMP%]{width:100%;padding-left:5%;padding-right:5%;padding-top:1%;border-bottom-width:1px;border-bottom-color:#404045;border-bottom-style:solid;border-top-width:1px;border-top-color:#404045;border-top-style:solid}.contenedor-principal[_ngcontent-%COMP%]   .contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.contenedor-principal[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.contenedor-acciones[_ngcontent-%COMP%]{width:100%;position:relative;display:flex;justify-content:center;margin-top:10px;margin-bottom:10px}.contenedor-acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:25%}.contenedor-acciones[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]{margin-left:5%}.contenedor-acciones[_ngcontent-%COMP%]   .btn-validar-inventario[_ngcontent-%COMP%]{margin-right:5%}']}),o})();var S=c(3178),D=c(7873);function O(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",7)(1,"label"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"label",8),e._uU(5),e.qZA(),e.TgZ(6,"mat-icon",9),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.eliminarDocumento(r))}),e.qZA(),e.TgZ(7,"mat-icon",10),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.eliminarDocumento(r))}),e.qZA()()}if(2&o){const t=a.$implicit;e.xp6(2),e.Oqu(null==t.tipo_documento?null:t.tipo_documento.descripcion),e.xp6(3),e.Oqu(t.nombre)}}function M(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.guardar())}),e._uU(1," Guardar "),e.qZA()}}let E=(()=>{class o{ngOnInit(){}constructor(t,n,i){this.data=t,this.modal=n,this.documentoVentaPostService=i,this.listaDocumentoVentaEliminar=[],this.lista_id=[]}eliminarDocumento(t){this.listaDocumentoVentaEliminar.push(t),this.lista_id.push(t.id||0);let n=this.data.lista_documentos_venta.indexOf(t);n>-1&&this.data.lista_documentos_venta.splice(n,1)}guardar(){console.info(this.lista_id),this.documentoVentaPostService.eliminarDocumentoVentaPorListaId({lista_id:this.lista_id}).then(n=>{this.modal.open(u._,{data:{titulo:l.in,accion:n.mensaje,opciones:1},disableClose:!0}).afterClosed().subscribe(i=>{this.modal.closeAll()})})}cancelar(){this.modal.closeAll()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.WI),e.Y36(p.uw),e.Y36(D.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-venta-baja-ver-documentos-supervision"]],decls:11,vars:2,consts:[[1,"contenedor-mini-modal"],[1,"contenedor-mini-modal-cabecera"],[1,"contenedor-mini-modal-cuerpo"],["class","icono-validado",4,"ngFor","ngForOf"],[1,"contenedor-mini-modal-pie"],["class","btn-principal margin-derecho-5 padding-costados-15",3,"click",4,"ngIf"],[1,"btn-principal","margin-derecho-5","padding-costados-15",3,"click"],[1,"icono-validado"],[1,"icono-aprobado"],["aria-hidden","false","fontIcon","cancel",1,"icono-rechazado-mini",3,"click"],["aria-hidden","false","fontIcon","download_2",1,"icono-rechazado-mini",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3,"Documentos de Supervision"),e.qZA()(),e.TgZ(4,"div",2)(5,"ul"),e.YNc(6,O,8,2,"li",3),e.qZA()(),e.TgZ(7,"div",4),e.YNc(8,M,2,0,"button",5),e.TgZ(9,"button",6),e.NdJ("click",function(){return n.cancelar()}),e._uU(10," Salir "),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngForOf",n.data.lista_documentos_venta),e.xp6(2),e.Q6J("ngIf",n.listaDocumentoVentaEliminar.length>0&&"FINALIZADO"!=n.data.estado_informe_venta&&"APROBADO"!=n.data.estado_informe_venta))},dependencies:[g.sg,g.O5,h.Hw]}),o})();var b=c(8996),U=c(9479),y=c(5864),P=c(2692),B=c(6980),C=c(5861),j=c(4592),T=c(6757);let R=(()=>{class o{constructor(t){this.apiService=t}crearDocumentoVentaSupervisionMasivo(t){var n=this;return(0,C.Z)(function*(){let i={};return yield n.apiService.post(j.RU.crearDocumentoVentaMasivo,JSON.stringify(t)).toPromise().then(r=>{i=r}),i})()}CrearDocumentoVentaSupervisionFormData(t){var n=this;return(0,C.Z)(function*(){let i={};return yield n.apiService.postFormDataConImagen(j.Ps.crearDocumentoVentaSupervisionMasivoFormData,t).toPromise().then(r=>{i=r}),i})()}eliminarDocumentoVentaSupervisionPorListaId(t){var n=this;return(0,C.Z)(function*(){let i={};return yield n.apiService.post(j.RU.eliminarDocumentoVentaPorLista,JSON.stringify(t)).toPromise().then(r=>{i=r}),i})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(T.sM))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),k=(()=>{class o{constructor(t){this.apiService=t}obtenerListaDocumentoVentaSupervisionPorInformeVenta(t){var n=this;return(0,C.Z)(function*(){let i={},r=`${j.Ps.obtenerListaDocumentoVentaSupervisionPorInformeVenta}${t}`;return yield n.apiService.get(r).toPromise().then(s=>{i=s}),i})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(T.sM))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function q(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.ActualizarEntrega())}),e._uU(1," Finalizar Informe "),e.qZA()}}function N(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"#"),e.qZA())}function Y(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.index;e.xp6(1),e.Oqu(t+1)}}function F(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"C\xf3digo"),e.qZA())}function G(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu((null==t.informe_baja_elemento?null:t.informe_baja_elemento.codigo_activo)||"S/C")}}function z(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Marca"),e.qZA())}function J(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu((null==t.informe_baja_elemento?null:t.informe_baja_elemento.marca)||"-")}}function $(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Modelo"),e.qZA())}function Q(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu((null==t.informe_baja_elemento?null:t.informe_baja_elemento.modelo)||"-")}}function L(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Serie"),e.qZA())}function H(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu((null==t.informe_baja_elemento?null:t.informe_baja_elemento.numero_serie)||"-")}}function K(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Fecha Venta"),e.qZA())}function W(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu((null==t.informe_venta?null:t.informe_venta.fecha_creacion)||"-")}}function X(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Informe"),e.qZA())}function ee(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.cantidad_informes||"-")}}function te(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Equipo"),e.qZA())}function oe(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu((null==t.informe_baja_elemento?null:t.informe_baja_elemento.equipo)||"-")}}function ne(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Cantidad"),e.qZA())}function ae(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.ultimo_stock||(null==t.informe_baja_elemento?null:t.informe_baja_elemento.cantidad_sin_venta)||(null==t.informe_baja_elemento?null:t.informe_baja_elemento.cantidad)||"0")}}function ie(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Cant. a enviar"),e.qZA())}function re(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.cantidad_inventariado||"0")}}function ce(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Imagen"),e.qZA())}function se(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",64)(1,"mat-icon",65),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.verImagenes(r))}),e.qZA()()}}function le(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Supervisado"),e.qZA())}function de(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",64)(1,"mat-icon",66),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.entregar(r,1))}),e.qZA(),e._uU(2," \xa0\xa0"),e.TgZ(3,"mat-icon",67),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.entregar(r,2))}),e.qZA()()}if(2&o){const t=a.$implicit;e.xp6(1),e.ekj("icono-check","SI"===t.entregado||"SS"===t.entregado),e.xp6(2),e.ekj("icono-rojo","NO"===t.entregado||"NN"===t.entregado)}}function me(o,a){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Observacion"),e.qZA())}function ue(o,a){if(1&o&&(e.TgZ(0,"td",64),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t.observacion_entregado,"")}}function pe(o,a){1&o&&e._UZ(0,"tr",68)}function fe(o,a){1&o&&e._UZ(0,"tr",69)}function _e(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",70),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.SelecionarItems(r))}),e._uU(1),e.qZA()}if(2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.descripcion," ")}}function ge(o,a){1&o&&(e.TgZ(0,"div",31)(1,"label",71),e._uU(2,"C\xf3digo"),e.qZA()())}function he(o,a){1&o&&(e.TgZ(0,"div",72),e._UZ(1,"input",73),e.qZA())}function ve(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",74),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.guardarDocumentos())}),e._uU(1," Guardar Documento "),e.qZA()}if(2&o){const t=e.oxw();e.ekj("btn-principal-off",!t.puedeAdjuntar),e.Q6J("disabled",!t.puedeAdjuntar)}}function be(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.verDocumentos())}),e.qZA()}}function Ce(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",76)(1,"div",7),e._UZ(2,"mat-icon",77),e._uU(3),e.TgZ(4,"mat-icon",78),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.eliminarDocumento(r))}),e.qZA()()()}if(2&o){const t=a.$implicit;e.xp6(3),e.hij("",t.nombre," ")}}let Z=(()=>{class o{constructor(t,n,i,r,s,V,Ze,Ie,we){this.modal=t,this.router=n,this.activatedRoute=i,this.ventaElementoGetService=r,this.bajaElementoImagenGetService=s,this.tipoDocumentoGetService=V,this.ventaElementoPostService=Ze,this.documentoVentaPostService=Ie,this.documentoVentaSupervisionGetService=we,this.tablaCabecera=["id","codigo","marca","modelo","numeroSerie","fechaVenta","informe","equipo","cantidad","cantidadEnviar","imagen","entregado","observacion"],this.informeVentaId=0,this.puedeAdjuntar=!!(0,_.Gs)(l.w3,l.P5),this.estadoInformeVenta="",this.sesion=(0,_.l3)(),this.sumaIndex=1,this.urlDireccionar="",this.mostrarValidarSupervision=!1,this.mostrarCodigo=!1,this.idTipoDocumento=0,this.mostrarItemSeleccionado=!1,this.listaInformeVentaElemento=[],this.listaModeloRequest=new Array,this.listaImagenElemento=new Array,this.itemSeleccionado="Selecione Documento",this.listaTiposDocumento=[],this.listaInformeDocumentoVentaSupervision=[],this.listaInformeDocumentoVentaSupervisionGet=[],this.codigoDocumento="",this.textoDocumentos="",this.cantidadElementosMostrados=0,this.codigoInformeVenta=""}ngOnInit(){this.cargarTiposDocumento(),this.activatedRoute.params.subscribe(t=>{this.informeVentaId=parseInt(t.idInformeVenta),this.urlDireccionar="main/venta-baja/usuario/adjuntar/"+this.informeVentaId+"/",this.cargarTablaInformeVenta(this.informeVentaId)})}cargarTiposDocumento(){this.tipoDocumentoGetService.obtenerListaTipoDocumento().then(t=>{this.listaTiposDocumento=t.data.lista_tipo_documento||[],1===t.data.lista_tipo_documento[0].id&&(this.mostrarValidarSupervision=!0,this.idTipoDocumento=t.data.lista_tipo_documento[0].id,this.itemSeleccionado=t.data.lista_tipo_documento[0].descripcion)})}SelecionarItems(t){this.itemSeleccionado=t.descripcion,this.mostrarItemSeleccionado=!0,this.idTipoDocumento=t.id,1===t.id?(this.mostrarValidarSupervision=!0,this.mostrarCodigo=!1):3===t.id?(this.mostrarCodigo=!0,this.mostrarValidarSupervision=!1):(this.mostrarValidarSupervision=!1,this.mostrarCodigo=!1)}cargarTablaInformeVenta(t){this.ventaElementoGetService.obtenerListaInformeVentaElementoPorInformeVentaConInventariado(t).then(n=>{this.listaInformeVentaElemento=n.data.lista_informe_venta_elemento,this.cantidadElementosMostrados=this.listaInformeVentaElemento.length;let i=n.data.lista_informe_venta_elemento[0];this.estadoInformeVenta=i.informe_venta.estado,this.codigoInformeVenta=i.informe_venta.empresa.nombre_corto+"-"+i.informe_venta.fecha_creacion+"-"+i.informe_venta.id,this.dataSource=new d.by(this.listaInformeVentaElemento)}),this.documentoVentaSupervisionGetService.obtenerListaDocumentoVentaSupervisionPorInformeVenta(t).then(n=>{n&&(this.listaInformeDocumentoVentaSupervisionGet=n.data.lista_documento_venta),this.textoDocumentos=this.listaInformeDocumentoVentaSupervisionGet.length>0?"Ver documentos":"Sin Documentos"})}dialogVentaBajaAdjuntar(){this.modal.open(x.P,{data:{idInformeVenta:this.informeVentaId}})}dialogVentaBajaEditar(t){this.router.navigate(["main/venta-baja/editar/",t])}verDocumentos(){this.modal.open(E,{data:{lista_documentos_venta:this.listaInformeDocumentoVentaSupervisionGet,estado_informe_venta:this.estadoInformeVenta}}).afterClosed().subscribe(t=>{this.cargarTablaInformeVenta(this.informeVentaId)})}ActualizarEntrega(){this.listaModeloRequest.length===this.cantidadElementosMostrados?this.modal.open(u._,{data:{titulo:l.in,accion:l.x9+l.Pw,opciones:2},disableClose:!0}).afterClosed().subscribe(t=>{t&&this.ventaElementoPostService.editarInformeVentaElementoMasivo({informe_venta_id:this.informeVentaId,lista_informe_venta_elemento:this.listaModeloRequest,lista_informe_venta_elemento_eliminar:[],estado:l.GT,usuario_id_edicion:this.sesion.usuario.id}).then(i=>{console.info("respuesta",i),"0"===i.codigo?this.modal.open(u._,{data:{titulo:l.in,accion:l.H1,opciones:1},disableClose:!0}).afterClosed().subscribe(r=>{r&&this.router.navigate(["main/venta-baja"])}):this.modal.open(u._,{data:{titulo:l.in,accion:i.mensaje,opciones:1},disableClose:!0})})}):this.modal.open(u._,{data:{titulo:l.in,accion:"Tiene elementos sin revisar",opciones:1},disableClose:!0})}entregar(t,n){if("APROBADO"===this.estadoInformeVenta){let i="",r=this.listaInformeVentaElemento.indexOf(t);2===n?this.modal.open(w,{disableClose:!0}).afterClosed().subscribe(s=>{console.info("response",s),s&&(i=s,this.listaInformeVentaElemento[r].entregado="NO",this.listaInformeVentaElemento[r].observacion_entregado=i,this.dataSource=new d.by(this.listaInformeVentaElemento),this.agregarElementoAListaRequest(t,s))}):(this.listaInformeVentaElemento[r].entregado="SI",this.listaInformeVentaElemento[r].observacion_entregado="",this.agregarElementoAListaRequest(t,""))}}agregarElementoAListaRequest(t,n){let i=0;i=t.informe_baja_elemento.cantidad_sin_venta>0?t.informe_baja_elemento.cantidad_sin_venta:t.informe_baja_elemento.cantidad;const r={id:t.id,igv:t.igv,precio_base:t.precio_base,entregado:t.entregado,observacion_entregado:n,estado:t.estado,informe_venta_id:t.informe_venta.id,informe_baja_elemento_id:t.informe_baja_elemento.id};let s=this.listaModeloRequest.findIndex(V=>V.id===t.id);-1===s?this.listaModeloRequest.push(r):this.listaModeloRequest[s].entregado=t.entregado}verImagenes(t){this.bajaElementoImagenGetService.obtenerBajaElementoImagen(t.informe_baja_elemento.id).then(n=>{this.listaImagenElemento=n.data.lista_imagen_elemento,this.modal.open(S.d,{data:{listaImagenes:this.listaImagenElemento}}).afterClosed().subscribe(r=>{})})}guardarArchivo(t){const n=t.target.files[0];if(n){let i={tipo_documento_id:this.idTipoDocumento,informe_venta_id:this.informeVentaId,nombre:n.name,usuario_id_creacion:this.sesion.usuario.id,file:n};if(this.listaInformeDocumentoVentaSupervision.length>0){let r=this.listaInformeDocumentoVentaSupervision.findIndex(s=>s.tipo_documento_id===this.idTipoDocumento);r>-1?this.modal.open(u._,{data:{titulo:l.in,accion:"El tipo de documento ya fue ingresado \n \xbfDesea volver a ingresar?",opciones:2},disableClose:!0}).afterClosed().subscribe(s=>{s&&(this.listaInformeDocumentoVentaSupervision.slice(r),this.listaInformeDocumentoVentaSupervision.push(i))}):this.listaInformeDocumentoVentaSupervision.push(i)}else this.listaInformeDocumentoVentaSupervision.push(i)}}guardarDocumentos(){this.listaInformeDocumentoVentaSupervision.length>0?this.modal.open(u._,{data:{titulo:l.in,accion:l.x9+"guardas los documentos adjuntados?",opciones:2},disableClose:!0}).afterClosed().subscribe(t=>{if(t){const n=new FormData;this.listaInformeDocumentoVentaSupervision.forEach((i,r)=>{n.append(`archivo.${r}.tipo_documento_id`,i.tipo_documento_id.toString()),n.append(`archivo.${r}.informe_venta_id`,i.informe_venta_id.toString()),n.append(`archivo.${r}.nombre`,i.nombre),n.append(`archivo.${r}.codigo`,i.codigo||""),n.append(`archivo.${r}.usuario_id_creacion`,i.usuario_id_creacion.toString()),n.append(`archivo.${r}.file`,i.file)}),this.documentoVentaPostService.CrearDocumentoVentaSupervisionFormData(n).then(i=>{this.modal.open(u._,{data:{titulo:l.in,accion:l.H1,opciones:1},disableClose:!0}).afterClosed().subscribe(r=>{location.reload()})})}}):this.modal.open(u._,{data:{titulo:l.in,accion:"No ha adjuntado ning\xfan documento",opciones:1},disableClose:!0})}eliminarDocumento(t){let n=this.listaInformeDocumentoVentaSupervision.indexOf(t);n>-1&&this.listaInformeDocumentoVentaSupervision.splice(n,1)}exportarPdf(){this.ventaElementoGetService.ObtenerExcelInformeVentaElementoPorInformeVentaFinalizadoPDF(this.informeVentaId).then(t=>t.blob()).then(t=>{window.open(URL.createObjectURL(t),"_blank")}).catch(t=>{console.log(t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.uw),e.Y36(b.F0),e.Y36(b.gz),e.Y36(U.m),e.Y36(y.e),e.Y36(P.p),e.Y36(B.x),e.Y36(R),e.Y36(k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ne-adm-gact-venta-baja-reporte-usuario-adjunta"]],decls:100,vars:13,consts:[[1,"contenedor-pagina"],[1,"contenedor-pagina-cabecera"],[1,"contenedor-pagina-cabecera-izquierda"],[1,"contenedor-pagina-cabecera-derecha"],[1,"btn-principal","margin-derecho-5",3,"click"],["class","btn-principal margin-derecho-5",3,"click",4,"ngIf"],[1,"contenedor-pagina-cuerpo-1"],[1,"contenedor"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","tabla-titulo",4,"matHeaderCellDef"],["mat-cell","","class","tabla-valor",4,"matCellDef"],["matColumnDef","codigo"],["matColumnDef","marca"],["matColumnDef","modelo"],["matColumnDef","numeroSerie"],["matColumnDef","fechaVenta"],["matColumnDef","informe"],["matColumnDef","equipo"],["matColumnDef","cantidad"],["matColumnDef","cantidadEnviar"],["matColumnDef","imagen"],["matColumnDef","entregado"],["matColumnDef","observacion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","elemento-fila-para-collapse",4,"matRowDef","matRowDefColumns"],[1,"contenedor-pagina-cuerpo-2"],[1,"contenedor-pagina-cuerpo-2-cabecera"],[1,"contenedor-pagina-cuerpo-2-cuerpo"],[1,"contenedor-pagina-cuerpo-2-cuerpo-izquierda"],[1,"form-row"],[1,"form-group","paddinng-top-10"],["for","nombre",1,"label-common"],[1,"vw16"],[1,"form-group","col-md-12"],[1,"multiselect"],["tabindex","0","aria-placeholder","Select a control type","aria-expanded","false","aria-multiselectable","false","role","combobox",1,"multiselect-wrapper","colorFondo"],[1,"multiselect-single-label"],[1,"multiselect-single-label-text"],["aria-hidden","false","fontIcon","arrow_drop_down",1,"mostrar"],["tabindex","-1",1,"multiselect-arriba"],["id","multiselect-options","role","listbox",1,"multiselect-options"],["class","multiselect-option",3,"value","click",4,"ngFor","ngForOf"],["class","form-group paddinng-top-10",4,"ngIf"],["class","form-group col-md-2",4,"ngIf"],["for","categoria",1,"label-common"],[1,"form-group","vw16"],[1,"file"],["type","text","name","nombre","value","Seleccionar Archivo..","id","nombre","maxlength","300","disabled","",1,"textArchivo"],[1,"file-label"],["type","file","name","resume",1,"file-input",3,"change"],[1,"file-cta"],[1,"file-icon"],["src","assets/cloud-upload.png","width","25px","height","25px"],[1,"contenedor-pagina-cuerpo-2-cuerpo-derecha"],[1,"form-group","col-md-5"],["class","btn-principal width-100porciento paddinng-izquierdo-15 paddinng-derecho-15",3,"btn-principal-off","disabled","click",4,"ngIf"],[1,"form-group","col-md-4","paddinng-top-10"],[1,"form-group","col-md-1","paddinng-top-10"],["aria-hidden","false","id","verDoc","name","verDoc","fontIcon","visibility","class","icon-plomo",3,"click",4,"ngIf"],[1,"contenedor-pagina-pie"],[1,"contenedor-pagina-pie-izquierda"],["class","form-group",4,"ngFor","ngForOf"],["mat-header-cell","",1,"tabla-titulo"],["mat-cell","",1,"tabla-valor"],["aria-hidden","false","fontIcon","visibility",1,"icon-plomo",3,"click"],["aria-hidden","false","fontIcon","done",1,"icon-plomo",3,"click"],["aria-hidden","false","fontIcon","close",1,"icon-plomo",3,"click"],["mat-header-row",""],["mat-row","",1,"elemento-fila-para-collapse"],[1,"multiselect-option",3,"value","click"],["for","codigo",1,"label-common"],[1,"form-group","col-md-2"],["type","text","name","codigo","id","codigo","maxlength","300",1,"form-control"],[1,"btn-principal","width-100porciento","paddinng-izquierdo-15","paddinng-derecho-15",3,"disabled","click"],["aria-hidden","false","id","verDoc","name","verDoc","fontIcon","visibility",1,"icon-plomo",3,"click"],[1,"form-group"],["aria-hidden","false","fontIcon","description",1,"icono-aprobado"],["aria-hidden","false","fontIcon","cancel",1,"icono-rechazado",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return n.exportarPdf()}),e._uU(7," Exportar en PDF "),e.qZA(),e.YNc(8,q,2,0,"button",5),e.qZA()(),e.TgZ(9,"div",6)(10,"div",7)(11,"table",8),e.ynx(12,9),e.YNc(13,N,2,0,"th",10),e.YNc(14,Y,2,1,"td",11),e.BQk(),e.ynx(15,12),e.YNc(16,F,2,0,"th",10),e.YNc(17,G,2,1,"td",11),e.BQk(),e.ynx(18,13),e.YNc(19,z,2,0,"th",10),e.YNc(20,J,2,1,"td",11),e.BQk(),e.ynx(21,14),e.YNc(22,$,2,0,"th",10),e.YNc(23,Q,2,1,"td",11),e.BQk(),e.ynx(24,15),e.YNc(25,L,2,0,"th",10),e.YNc(26,H,2,1,"td",11),e.BQk(),e.ynx(27,16),e.YNc(28,K,2,0,"th",10),e.YNc(29,W,2,1,"td",11),e.BQk(),e.ynx(30,17),e.YNc(31,X,2,0,"th",10),e.YNc(32,ee,2,1,"td",11),e.BQk(),e.ynx(33,18),e.YNc(34,te,2,0,"th",10),e.YNc(35,oe,2,1,"td",11),e.BQk(),e.ynx(36,19),e.YNc(37,ne,2,0,"th",10),e.YNc(38,ae,2,1,"td",11),e.BQk(),e.ynx(39,20),e.YNc(40,ie,2,0,"th",10),e.YNc(41,re,2,1,"td",11),e.BQk(),e.ynx(42,21),e.YNc(43,ce,2,0,"th",10),e.YNc(44,se,2,0,"td",11),e.BQk(),e.ynx(45,22),e.YNc(46,le,2,0,"th",10),e.YNc(47,de,4,4,"td",11),e.BQk(),e.ynx(48,23),e.YNc(49,me,2,0,"th",10),e.YNc(50,ue,2,1,"td",11),e.BQk(),e.YNc(51,pe,1,0,"tr",24),e.YNc(52,fe,1,0,"tr",25),e.qZA()()(),e.TgZ(53,"div",26)(54,"div",27)(55,"h3"),e._uU(56,"Adjuntar"),e.qZA()(),e.TgZ(57,"div",28)(58,"div",29)(59,"div",30)(60,"div",31)(61,"label",32),e._uU(62,"Tipo de Documento"),e.qZA()(),e.TgZ(63,"div",33)(64,"div",34)(65,"div",35)(66,"div",36)(67,"div",37)(68,"span",38),e._uU(69),e.qZA()(),e._UZ(70,"mat-icon",39),e.qZA(),e.TgZ(71,"div",40)(72,"ul",41),e.YNc(73,_e,2,2,"li",42),e.qZA()()()()(),e.YNc(74,ge,3,0,"div",43),e.YNc(75,he,2,0,"div",44),e.TgZ(76,"div",31)(77,"label",45),e._uU(78,"Archivo"),e.qZA()(),e.TgZ(79,"div",46)(80,"div",47),e._UZ(81,"input",48),e.TgZ(82,"label",49)(83,"input",50),e.NdJ("change",function(r){return n.guardarArchivo(r)}),e.qZA(),e.TgZ(84,"span",51)(85,"span",52),e._UZ(86,"img",53),e.qZA()()()()()()(),e.TgZ(87,"div",54)(88,"div",30)(89,"div",55),e.YNc(90,ve,2,3,"button",56),e.qZA(),e.TgZ(91,"div",57)(92,"h3"),e._uU(93),e.qZA()(),e.TgZ(94,"div",58),e.YNc(95,be,1,0,"mat-icon",59),e.qZA()()()()(),e.TgZ(96,"div",60)(97,"div",61)(98,"div",7),e.YNc(99,Ce,5,1,"div",62),e.qZA()()()()),2&t&&(e.xp6(4),e.hij("Informe Venta : ",n.codigoInformeVenta,""),e.xp6(4),e.Q6J("ngIf","APROBADO"===n.estadoInformeVenta),e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(40),e.Q6J("matHeaderRowDef",n.tablaCabecera),e.xp6(1),e.Q6J("matRowDefColumns",n.tablaCabecera),e.xp6(17),e.Oqu(n.itemSeleccionado),e.xp6(4),e.Q6J("ngForOf",n.listaTiposDocumento),e.xp6(1),e.Q6J("ngIf",n.mostrarCodigo),e.xp6(1),e.Q6J("ngIf",n.mostrarCodigo),e.xp6(15),e.Q6J("ngIf","APROBADO"===n.estadoInformeVenta),e.xp6(3),e.Oqu(n.textoDocumentos),e.xp6(2),e.Q6J("ngIf",n.listaInformeDocumentoVentaSupervisionGet.length>0),e.xp6(4),e.Q6J("ngForOf",n.listaInformeDocumentoVentaSupervision))},dependencies:[g.sg,g.O5,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,h.Hw],styles:[".contenedor-acciones[_ngcontent-%COMP%]{width:calc(100% - 20px);height:10%;background-color:#313135;align-items:center;border-radius:6px;margin-right:10px;margin-left:10px;box-shadow:#0003 0 2px 8px;text-align:right}.contenedor-acciones-izquierdo[_ngcontent-%COMP%]{padding-top:15px;position:relative;display:flex;justify-content:flex-start;align-items:center;float:left;width:75%;height:100%;padding-left:1%}.contenedor-acciones-derecho[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:flex-end;align-items:center;float:right;width:25%;height:100%;padding-right:1%}.contenedor-acciones-derecho[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:1%;width:90%}.contenedor-medio[_ngcontent-%COMP%]{width:100%;margin-top:1%;height:calc(85% - 60px);display:flex}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]{width:calc(100% - 20px);height:100%;float:right;border-radius:6px;background-color:#313135;overflow-y:auto;-ms-overflow-style:none;scrollbar-width:none;margin-left:10px;box-shadow:#0003 0 2px 8px}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]   .contenedor-tabla[_ngcontent-%COMP%]{width:calc(100% - 20px);height:calc(93% - 10px);overflow-y:auto;margin-right:10px}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]   .contenedor-pie[_ngcontent-%COMP%]{border-top:solid #3b3b40;width:100%;height:10px;padding-top:10px;justify-content:center;display:flex}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]   .contenedor-pie-cuadro[_ngcontent-%COMP%]{margin-right:15px;width:6%;height:20%;text-align:center}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]   .contenedor-pie[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#fff}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;height:5px!important}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]   .contenedor-tabla[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;height:10px!important;top:0;left:0}.contenedor-medio[_ngcontent-%COMP%]   .contenedor-lista[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tabla[_ngcontent-%COMP%]{margin-top:2%}.color-a[_ngcontent-%COMP%]{color:#fff}.btn-primario[_ngcontent-%COMP%]{width:calc(100% - 500px);height:38px;border-radius:4px;border-width:0;background-color:#2a82ac;color:#f1f9f7;font-family:Roboto,sans-serif;font-size:.95rem;white-space:nowrap}.control[_ngcontent-%COMP%]{box-sizing:border-box;clear:both;font-size:1rem;position:relative;text-align:inherit}"]}),o})();const je=[{path:"",component:Z}];let xe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[b.Bz.forChild(je),b.Bz]}),o})();var Ae=c(577),Ve=c(164);let Te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o,bootstrap:[Z]}),o.\u0275inj=e.cJS({imports:[f.JF,g.ez,m.u5,xe,m.UX,d.p0,h.Ps,p.Is,Ae.VentaBajaCrearModule,Ve.k]}),o})()},5864:(I,v,c)=>{c.d(v,{e:()=>m});var p=c(5861),g=c(4592),d=c(4650),h=c(6757);let m=(()=>{class f{constructor(_){this.apiService=_}obtenerBajaElementoImagen(_){var l=this;return(0,p.Z)(function*(){let u={},A=`${g.b9.obtenerListaInformeBajaElementoImagen}${_}`;return yield l.apiService.get(A).toPromise().then(e=>{u=e}),u})()}}return f.\u0275fac=function(_){return new(_||f)(d.LFG(h.sM))},f.\u0275prov=d.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);